# 更新日志 - 座位查询改为桌号查询

**更新日期**: 2026-01-08

## 📝 更新概述

将整个系统从"座位查询"改为"桌号查询",包括前端界面、后端逻辑、文档说明等所有相关内容。

## 🔧 修改详情

### 1. 前端界面 (`src/components/SeatQuery.vue`)

**修改内容**:

- 标题: "座位查询" → "桌号查询"
- Logo 标识: "SEAT" → "TABLE"
- 按钮文字: "查询座位" → "查询桌号"
- 结果显示标签: "座位号" → "桌号"

**影响范围**: 用户可见的所有界面文字

### 2. 后端数据解析 (`server.js`)

**修改内容**:

- Excel 列名识别逻辑优化:
  - 优先识别包含"桌"字的列(如"桌号")
  - 保持对旧格式"座位"的向后兼容
- 默认列名: "座位号" → "桌号"

**代码变更**:

```javascript
// 修改前
const seatKey = Object.keys(row).find((k) => k.includes("座"));
seat: row[seatKey || "座位号"] || "";

// 修改后
const seatKey =
  Object.keys(row).find((k) => k.includes("桌")) ||
  Object.keys(row).find((k) => k.includes("座"));
seat: row[seatKey || "桌号"] || "";
```

**兼容性**: 仍然支持旧的 Excel 文件(包含"座位"或"座位号"列)

### 3. 管理后台 (`src/components/AdminPanel.vue`)

**修改内容**:

- Excel 解析逻辑与后端保持一致
- 错误提示信息: "请检查是否包含员工编号、姓名、座位号列" → "请检查是否包含员工编号、姓名、桌号列"

### 4. 文档更新

#### README.md

- 项目标题: "座位查询系统 (Seat Inquiry System)" → "桌号查询系统 (Table Inquiry System)"
- 功能描述: 所有"座位"相关描述改为"桌号"
- Excel 格式要求: "座位号" → "桌号"

#### CLOUDFLARE_DEPLOY.md

- API 说明: "获取座位数据" → "获取桌号数据"
- 功能支持表: "座位查询" → "桌号查询"

## 📊 Excel 文件格式要求

系统现在支持以下列名(按优先级排序):

1. **桌号** (推荐,新格式)
2. **桌** (简化格式)
3. **座位号** (兼容旧格式)
4. **座** (兼容旧格式)

**示例 Excel 格式**:

| 工号  | 姓名 | 桌号 |
| ----- | ---- | ---- |
| DT001 | 张三 | A-01 |
| DT002 | 李四 | A-02 |

## ✅ 向后兼容性

- ✅ 旧的 Excel 文件(使用"座位号"列)仍然可以正常使用
- ✅ 已上传的数据不受影响
- ✅ API 接口保持不变
- ✅ 数据结构保持不变(内部字段名仍为`seat`)

## 🚀 部署建议

1. **无需重新上传数据**: 现有数据可以继续使用
2. **建议更新 Excel 模板**: 新的数据文件建议使用"桌号"作为列名
3. **无需修改配置**: 所有配置保持不变

## 📌 注意事项

- 内部代码变量名(如`seat`)保持不变,仅修改用户可见的文字
- 数据库/存储结构未改变,确保数据迁移平滑
- 所有修改已测试兼容性,不影响现有功能

---

**修改人员**: Antigravity AI Assistant  
**审核状态**: 待审核
